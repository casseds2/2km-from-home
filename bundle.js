var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function f(){return p(" ")}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function g(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let h;function y(t){h=t}function $(t){(function(){if(!h)throw new Error("Function called outside component initialization");return h})().$$.on_mount.push(t)}const _=[],b=[],v=[],x=[],w=Promise.resolve();let k=!1;function C(t){v.push(t)}let A=!1;const M=new Set;function S(){if(!A){A=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];y(e),D(e.$$)}for(_.length=0;b.length;)b.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];M.has(e)||(M.add(e),e())}v.length=0}while(_.length);for(;x.length;)x.pop()();k=!1,A=!1,M.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const E=new Set;let O;function R(t,e){t&&t.i&&(E.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(E.has(t))return;E.add(t),O.c.push(()=>{E.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function N(t,n,i){const{fragment:a,on_mount:l,on_destroy:c,after_update:s}=t.$$;a&&a.m(n,i),C(()=>{const n=l.map(e).filter(r);c?c.push(...n):o(n),t.$$.on_mount=[]}),s.forEach(C)}function I(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(_.push(t),k||(k=!0,w.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(e,r,i,a,l,s,u=[-1]){const p=h;y(e);const f=r.props||{},d=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(d.ctx=i?i(e,f,(t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),m&&P(e,t)),n}):[],d.update(),m=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(c)}else d.fragment&&d.fragment.c();r.intro&&R(e.$$.fragment),N(e,r.target,r.anchor),S()}y(p)}class z{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function T(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function U(e){let n;return{c(){n=p("Loading...")},m(t,e){l(t,n,e)},p:t,d(t){t&&c(n)}}}function F(t){let e,n=t[1],o=[];for(let e=0;e<n.length;e+=1)o[e]=G(T(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=p("")},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,r){if(6&r){let i;for(n=t[1],i=0;i<n.length;i+=1){const a=T(t,n,i);o[i]?o[i].p(a,r):(o[i]=G(a),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){s(o,t),t&&c(e)}}}function G(t){let e,n,o,r,i,s,h,y,$,_,b,v,x,w,k,C,A,M,S,D,E,O,R,L,N=t[13].name+"",I=t[13].opening_hours&&t[13].opening_hours.open_now?"Yes":"No",P=t[13].vicinity+"",j=t[2](t[13].rating,"‚≠ê")+"",z=t[2](t[13].price_level,"üíµ")+"";return{c(){e=u("li"),n=u("h2"),o=p(N),r=f(),i=u("p"),s=p("Open Now:\n          "),h=u("span"),y=p(I),$=f(),_=u("p"),b=p("Address:\n          "),v=u("span"),x=p(P),w=f(),k=u("p"),C=p("Rating:\n          "),A=u("span"),M=p(j),S=f(),D=u("p"),E=p("Pricing:\n          "),O=u("span"),R=p(z),L=f(),d(h,"class","place-status"),d(e,"class","place"),g(e,"--place-index",t[15]),g(e,"--bg-icon","url("+t[13].icon+")")},m(t,c){l(t,e,c),a(e,n),a(n,o),a(e,r),a(e,i),a(i,s),a(i,h),a(h,y),a(e,$),a(e,_),a(_,b),a(_,v),a(v,x),a(e,w),a(e,k),a(k,C),a(k,A),a(A,M),a(e,S),a(e,D),a(D,E),a(D,O),a(O,R),a(e,L)},p(t,n){2&n&&N!==(N=t[13].name+"")&&m(o,N),2&n&&I!==(I=t[13].opening_hours&&t[13].opening_hours.open_now?"Yes":"No")&&m(y,I),2&n&&P!==(P=t[13].vicinity+"")&&m(x,P),2&n&&j!==(j=t[2](t[13].rating,"‚≠ê")+"")&&m(M,j),2&n&&z!==(z=t[2](t[13].price_level,"üíµ")+"")&&m(R,z),2&n&&g(e,"--bg-icon","url("+t[13].icon+")")},d(t){t&&c(e)}}}function Q(e){let n,o,r;function i(t,e){return t[1]?F:U}let a=i(e),s=a(e);return{c(){n=u("div"),o=f(),r=u("ul"),s.c(),d(n,"class","map-container"),d(r,"class","places"),d(r,"id","places-list")},m(t,i){l(t,n,i),e[12](n),l(t,o,i),l(t,r,i),s.m(r,null)},p(t,[e]){a===(a=i(t))&&s?s.p(t,e):(s.d(1),s=a(t),s&&(s.c(),s.m(r,null)))},i:t,o:t,d(t){t&&c(n),e[12](null),t&&c(o),t&&c(r),s.d()}}}function Y(t,e,n){let o,r,i,a,l,c,{position:s}=e,{amenity:u}=e,p=[];const f=t=>{a.route({origin:new google.maps.LatLng(s),destination:t.geometry.location,travelMode:"DRIVING"},(t,e)=>{"OK"===e?l.setDirections(t):alert(`Directions request failed due to ${e}`)})},d=()=>{for(var t=0;t<p.length;t++)p[t].setMap(null);p=[],c.forEach(t=>{let e=t.geometry.location;const n=new google.maps.Marker({position:e,map:r,title:t.name});n.addListener("click",()=>{f(t)}),p.push(n)})};return $(async()=>{r=new google.maps.Map(o,{zoom:13,center:s,disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0});const t=new google.maps.Marker({position:s,label:{color:"#fff",text:"You",fontWeight:"bold"},map:r,title:"You"});new google.maps.Circle({map:r,radius:2e3,fillColor:"#AA0000",fillOpacity:.2,strokeWeight:1,strokeColor:"#F23D3D"}).bindTo("center",t,"position"),n(6,i=new google.maps.places.PlacesService(r)),i.nearbySearch({location:s,radius:2e3,type:u},t=>{n(1,c=t),d()}),a=new google.maps.DirectionsService,l=new google.maps.DirectionsRenderer,l.setMap(r)}),t.$set=t=>{"position"in t&&n(3,s=t.position),"amenity"in t&&n(4,u=t.amenity)},t.$$.update=()=>{88&t.$$.dirty&&i&&s&&i.nearbySearch({location:s,radius:2e3,type:u},t=>{n(1,c=t),d()})},[o,c,(t,e)=>{let n="";for(let o=0;o<t;o++)n+=` ${e}`;return n},s,u,r,i,a,l,p,f,d,function(t){b[t?"unshift":"push"](()=>{n(0,o=t)})}]}class q extends z{constructor(t){super(),j(this,t,Y,Q,i,{position:3,amenity:4})}}function B(t,e,n){const o=t.slice();return o[7]=e[n].label,o[8]=e[n].value,o}function H(t){let e,n,o,r,i,s,m,g=t[7]+"";return{c(){e=u("label"),n=p(g),o=f(),r=u("input"),s=f(),d(r,"type","radio"),r.__value=i=t[8],r.value=r.__value,t[6][0].push(r)},m(i,c,u){var p,f,d,g;l(i,e,c),a(e,n),a(e,o),a(e,r),r.checked=r.__value===t[2],a(e,s),u&&m(),p=r,f="change",d=t[5],p.addEventListener(f,d,g),m=()=>p.removeEventListener(f,d,g)},p(t,e){4&e&&(r.checked=r.__value===t[2])},d(n){n&&c(e),t[6][0].splice(t[6][0].indexOf(r),1),m()}}}function K(e){let n;return{c(){n=u("p"),n.textContent="Locating position... üî¶"},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&c(n)}}}function W(t){let e,n;const o=new q({props:{position:t[1],amenity:t[2]}});return{c(){var t;e=u("section"),(t=o.$$.fragment)&&t.c()},m(t,r){l(t,e,r),N(o,e,null),n=!0},p(t,e){const n={};2&e&&(n.position=t[1]),4&e&&(n.amenity=t[2]),o.$set(n)},i(t){n||(R(o.$$.fragment,t),n=!0)},o(t){L(o.$$.fragment,t),n=!1},d(t){t&&c(e),I(o)}}}function Z(t){let e,n,r,i,p,m,g,h,y,$,_,b,v,x,w,k,C,A,M=t[3],S=[];for(let e=0;e<M.length;e+=1)S[e]=H(B(t,M,e));const D=[W,K],E=[];function N(t,e){return t[0]&&t[1]?0:1}return x=N(t),w=E[x]=D[x](t),{c(){e=u("script"),r=f(),i=u("div"),p=u("header"),m=u("h1"),m.textContent="2km From Home",g=f(),h=u("p"),h.textContent="Find out what is near you!",y=f(),$=u("nav"),_=u("ul");for(let t=0;t<S.length;t+=1)S[t].c();b=f(),v=u("main"),w.c(),k=f(),C=u("footer"),C.innerHTML="<p>Contributing to the effort ü§ù</p>",e.async=!0,e.defer=!0,e.src!==(n="https://maps.googleapis.com/maps/api/js?key=AIzaSyBS3G0cjnQ_xK57965TUhZOxr61ng3sIUQ&callback=initMap&libraries=places,directions")&&d(e,"src","https://maps.googleapis.com/maps/api/js?key=AIzaSyBS3G0cjnQ_xK57965TUhZOxr61ng3sIUQ&callback=initMap&libraries=places,directions"),d(m,"class","title"),d(h,"class","subtitle"),d(_,"class","nav-list"),d(i,"class","container")},m(t,n){a(document.head,e),l(t,r,n),l(t,i,n),a(i,p),a(p,m),a(p,g),a(p,h),a(p,y),a(p,$),a($,_);for(let t=0;t<S.length;t+=1)S[t].m(_,null);a(i,b),a(i,v),E[x].m(v,null),l(t,k,n),l(t,C,n),A=!0},p(t,[e]){if(12&e){let n;for(M=t[3],n=0;n<M.length;n+=1){const o=B(t,M,n);S[n]?S[n].p(o,e):(S[n]=H(o),S[n].c(),S[n].m(_,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}let n=x;x=N(t),x===n?E[x].p(t,e):(O={r:0,c:[],p:O},L(E[n],1,1,()=>{E[n]=null}),O.r||o(O.c),O=O.p,w=E[x],w||(w=E[x]=D[x](t),w.c()),R(w,1),w.m(v,null))},i(t){A||(R(w),A=!0)},o(t){L(w),A=!1},d(t){c(e),t&&c(r),t&&c(i),s(S,t),E[x].d(),t&&c(k),t&&c(C)}}}function V(t,e,n){let o,{mapReady:r}=e,i="grocery_or_supermarket";const a=t=>new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(e,n,t)});$(async()=>{const t=await a({enableHighAccuracy:!0,timeout:7e3,maximumAge:0}),{latitude:e,longitude:r}=t.coords;n(1,o={lat:e,lng:r})});return t.$set=t=>{"mapReady"in t&&n(0,r=t.mapReady)},[r,o,i,[{label:"Groceries",value:"grocery_or_supermarket"},{label:"Supermarket",value:"supermarket"},{label:"Offlicence",value:"liquor_store"},{label:"Pharmacy",value:"pharmacy"},{label:"Drugstore",value:"drugstore"}],a,function(){i=this.__value,n(2,i)},[[]]]}const J=new class extends z{constructor(t){super(),j(this,t,V,Z,i,{mapReady:0})}}({target:document.body,props:{mapReady:!1}});return window.initMap=()=>J.$set({mapReady:!0}),J}();
//# sourceMappingURL=bundle.js.map
